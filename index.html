<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip & Conference Manager</title>
    <link rel="stylesheet" href="styles.css?v=12">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- PDF.js for parsing email PDFs client-side -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js" integrity="sha512-3P+qO4mx8HqSVLw2mYk5zXnlvIT8nNnq8m2d7i7kH0SrdlqN1w9Y7oZtC0u0z0lEJQq0o3p5WQ0+v9v3P6M7QA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""
    />
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""
    ></script>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <h1>🌍 Trip & Conference Manager</h1>
            <p>Organize your travels, track conference schedules, and never miss an important event</p>
        </div>

    <!-- Issues Modal -->
    <div id="issuesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Flagged Discrepancies</h2>
                <button class="close-modal" onclick="closeModal('issuesModal')">×</button>
            </div>
            <div id="issuesList" style="display:flex; flex-direction:column; gap:10px;"></div>
            <div style="display:flex; gap:10px; margin-top:12px;">
                <button class="btn btn-secondary" onclick="closeModal('issuesModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Elements Post Modal -->
    <div id="elementsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Prepare Elements Post</h2>
                <button class="close-modal" onclick="closeModal('elementsModal')">×</button>
            </div>
            <p style="color:#64748b; margin-bottom:8px;">Review and copy the text below to post into Elements.</p>
            <textarea id="elementsPostText" style="width:100%; min-height:220px; border:1px solid var(--border); border-radius:8px; padding:10px;"></textarea>
            <div style="display:flex; gap:10px; margin-top:12px;">
                <button class="btn btn-primary" onclick="copyElementsPost()">Copy to Clipboard</button>
                <button class="btn btn-secondary" onclick="closeModal('elementsModal')">Close</button>
            </div>
        </div>
    </div>

        <!-- Main Travel Categories -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 16px; margin: 20px 20px 15px 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 20px;">
                <div onclick="switchTab('flights')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">✈️</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Flights</div>
                </div>
                <div onclick="switchTab('hotels')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">🏨</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Hotels</div>
                </div>
                <div onclick="switchTab('map')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">🗺️</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Explore</div>
                </div>
                <div onclick="switchTab('weather')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">☀️</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Weather</div>
                </div>
                <div onclick="switchTab('itinerary')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">📅</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Itinerary</div>
                </div>
                <div onclick="switchTab('presentations')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 48px; margin-bottom: 8px;">🎤</div>
                    <div style="font-size: 14px; font-weight: 500; opacity: 0.9;">Presentations</div>
                </div>
            </div>
        </div>

        <!-- Sub-Categories -->
        <div style="background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%); padding: 20px; border-radius: 12px; margin: 0px 20px 30px 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
            <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 15px;">
                <div onclick="switchTab('packing')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">🎒</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Packing</div>
                </div>
                <div onclick="switchTab('conference')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">🎫</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Events</div>
                </div>
                <div onclick="switchTab('receipts')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">🧾</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Receipts</div>
                </div>
                <div onclick="switchTab('conferenceProgram')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">📋</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Conference</div>
                </div>
                <div onclick="switchTab('documents')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">📄</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Documents</div>
                </div>
                <div onclick="switchTab('checklist')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">✅</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Checklist</div>
                </div>
                <div onclick="switchTab('memories')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">📸</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Memories</div>
                </div>
                <div onclick="switchTab('archived')" style="text-align: center; color: white; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="font-size: 36px; margin-bottom: 6px;">📦</div>
                    <div style="font-size: 13px; font-weight: 500; opacity: 0.9;">Archived</div>
                </div>
            </div>
        </div>

        <div class="trips-bar">
            <h3>My Trips</h3>
            <div id="tripsList" class="trips-bar-list"></div>
            <div class="trips-bar-actions">
                <button class="btn btn-primary" onclick="showNewTripModal()">+ New Trip</button>
                <button class="btn btn-secondary" onclick="loadSampleTrip()">📋 Load Sample Trip</button>
            </div>
        </div>

        <div class="main-layout">
            <div class="sidebar">

                <div class="trips-list" style="margin-top: 20px;">
                    <h3>Upcoming Trips</h3>
                    <div id="upcomingTripsList"></div>
                </div>

                <div class="search-box">
                    <span class="search-icon">🔍</span>
                    <input type="text" id="searchEvents" placeholder="Search events..." onkeyup="searchEvents()">
                </div>

                <div id="quickStats" class="stats-grid" style="grid-template-columns: 1fr;">
                    <!-- Quick stats will appear here -->
                </div>
            </div>

            <div class="main-content">
                <div id="itineraryTab" class="tab-content active">
                    <!-- Upload or Manual Entry Choice -->
                    <div style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white;">
                        <h3 style="margin-top: 0; color: white;">📎 Add Event - Choose Method</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="document.getElementById('emailPdfInput').click()">
                                <div style="font-size: 48px; margin-bottom: 12px;">📤</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Upload Schedule</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Upload calendar, email, or PDF itinerary</p>
                                <input type="file" id="emailPdfInput" accept=".pdf,.eml,.msg,.txt,.ics,image/*" style="display: none;" onchange="handleEmailPdfInput(this)">
                            </div>
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="showAddEventModal()">
                                <div style="font-size: 48px; margin-bottom: 12px;">⌨️</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Enter Manually</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Add events one by one</p>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="showImportModal()">📥 Import .ics Calendar</button>
                        <button class="btn btn-secondary" onclick="exportItinerary()">📤 Export</button>
                        <button class="btn btn-secondary" onclick="showAgendaModal()">📄 Agenda</button>
                        <button class="btn btn-secondary" onclick="printItinerary()">🖨️ Print</button>
                    </div>
                    <div id="itineraryContent">
                        <div style="text-align: center; padding: 60px; color: #64748b;">
                            <h3>No trip selected</h3>
                            <p>Create a new trip or select one from the sidebar to get started</p>
                        </div>
                    </div>
                </div>

                <div id="flightsTab" class="tab-content">
                    <!-- Upload or Manual Entry Choice -->
                    <div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white;">
                        <h3 style="margin-top: 0; color: white;">📎 Add Flight - Choose Method</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="document.getElementById('flightUploadInput').click()">
                                <div style="font-size: 48px; margin-bottom: 12px;">📤</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Upload Confirmation</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Upload your flight confirmation email or PDF</p>
                                <input type="file" id="flightUploadInput" accept=".pdf,.eml,.msg,.txt,image/*" style="display: none;" onchange="handleFlightUpload(this)">
                            </div>
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="toggleFlightManualEntry()">
                                <div style="font-size: 48px; margin-bottom: 12px;">⌨️</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Enter Manually</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Type in your flight details</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="flightManualEntrySection" style="display: none; margin-bottom: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- Add Flight Section -->
                        <div style="background: #fff; border: 2px solid var(--border); border-radius: 12px; padding: 24px;">
                            <h3 style="margin-top: 0; color: #3b82f6;">➕ Add Flight Information</h3>
                            <div class="form-group">
                                <label>Airline</label>
                                <input type="text" id="flightAirline" placeholder="e.g., Delta, United, American">
                            </div>
                            <div class="form-group">
                                <label>Flight Number</label>
                                <input type="text" id="flightNumber" placeholder="e.g., DL1234">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div class="form-group">
                                    <label>Departure Date</label>
                                    <input type="date" id="flightDepartDate">
                                </div>
                                <div class="form-group">
                                    <label>Departure Time</label>
                                    <input type="time" id="flightDepartTime">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div class="form-group">
                                    <label>From (Airport/City)</label>
                                    <input type="text" id="flightFrom" placeholder="e.g., JFK, New York">
                                </div>
                                <div class="form-group">
                                    <label>To (Airport/City)</label>
                                    <input type="text" id="flightTo" placeholder="e.g., LAX, Los Angeles">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Confirmation Number</label>
                                <input type="text" id="flightConfirmation" placeholder="Booking confirmation #">
                            </div>
                            <div class="form-group">
                                <label>Notes (Optional)</label>
                                <textarea id="flightNotes" placeholder="Seat number, gate info, etc."></textarea>
                            </div>
                            <button class="btn btn-primary btn-full" onclick="addFlight()">💾 Save Flight</button>
                        </div>
                        
                        <!-- Check Flight Status Section -->
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 24px; color: white;">
                            <h3 style="margin-top: 0; color: white;">🔍 Check Flight Status</h3>
                            <p style="opacity: 0.9; margin-bottom: 20px;">Enter your flight details to check for delays, gate changes, or cancellations.</p>
                            
                            <div class="form-group">
                                <label style="color: white;">Airline</label>
                                <input type="text" id="statusAirline" placeholder="e.g., Delta" style="background: white; color: #000;">
                            </div>
                            <div class="form-group">
                                <label style="color: white;">Flight Number</label>
                                <input type="text" id="statusFlightNumber" placeholder="e.g., DL1234" style="background: white; color: #000;">
                            </div>
                            <div class="form-group">
                                <label style="color: white;">Date</label>
                                <input type="date" id="statusDate" style="background: white; color: #000;">
                            </div>
                            <button class="btn btn-primary btn-full" onclick="checkFlightStatus()" style="background: white; color: #667eea; font-weight: 600;">🔍 Check Status</button>
                            
                            <div id="flightStatusResult" style="margin-top: 20px; background: rgba(255,255,255,0.2); border-radius: 8px; padding: 15px; display: none;">
                                <!-- Flight status results will appear here -->
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.15); border-radius: 8px;">
                                <p style="font-size: 0.9em; margin: 0; opacity: 0.9;"><strong>💡 Tip:</strong> Check your airline's website for real-time updates:</p>
                                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                                    <a href="https://www.delta.com/flight-status" target="_blank" style="color: white; text-decoration: underline; font-size: 0.85em;">Delta</a>
                                    <a href="https://www.united.com/en/us/flightstatus" target="_blank" style="color: white; text-decoration: underline; font-size: 0.85em;">United</a>
                                    <a href="https://www.aa.com/homePage.do" target="_blank" style="color: white; text-decoration: underline; font-size: 0.85em;">American</a>
                                    <a href="https://www.southwest.com/flight-status/" target="_blank" style="color: white; text-decoration: underline; font-size: 0.85em;">Southwest</a>
                                    <a href="https://www.jetblue.com/flight-status" target="_blank" style="color: white; text-decoration: underline; font-size: 0.85em;">JetBlue</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <!-- Saved Flights List -->
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; border: 1px solid var(--border);">
                        <h3 style="margin-top: 0;">📋 Your Saved Flights</h3>
                        <div id="flightsList" style="display: flex; flex-direction: column; gap: 12px;">
                            <p style="color: #64748b; font-style: italic;">No flights added yet. Add your first flight above!</p>
                        </div>
                    </div>
                </div>

                <div id="hotelsTab" class="tab-content">
                    <!-- Upload or Manual Entry Choice -->
                    <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white;">
                        <h3 style="margin-top: 0; color: white;">📎 Add Hotel - Choose Method</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="document.getElementById('hotelUploadInput').click()">
                                <div style="font-size: 48px; margin-bottom: 12px;">📤</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Upload Confirmation</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Upload your hotel reservation email or PDF</p>
                                <input type="file" id="hotelUploadInput" accept=".pdf,.eml,.msg,.txt,image/*" style="display: none;" onchange="handleHotelUpload(this)">
                            </div>
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="toggleHotelManualEntry()">
                                <div style="font-size: 48px; margin-bottom: 12px;">⌨️</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Enter Manually</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Type in your hotel details</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="hotelManualEntrySection" style="display: none; margin-bottom: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- Add Hotel Section -->
                        <div style="background: #fff; border: 2px solid var(--border); border-radius: 12px; padding: 24px;">
                            <h3 style="margin-top: 0; color: #f59e0b;">➕ Add Hotel Information</h3>
                            <div class="form-group">
                                <label>Hotel Name</label>
                                <input type="text" id="hotelName" placeholder="e.g., Marriott Downtown">
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <input type="text" id="hotelAddress" placeholder="Street address">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div class="form-group">
                                    <label>Check-in Date</label>
                                    <input type="date" id="hotelCheckinDate">
                                </div>
                                <div class="form-group">
                                    <label>Check-in Time</label>
                                    <input type="time" id="hotelCheckinTime" value="15:00">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div class="form-group">
                                    <label>Check-out Date</label>
                                    <input type="date" id="hotelCheckoutDate">
                                </div>
                                <div class="form-group">
                                    <label>Check-out Time</label>
                                    <input type="time" id="hotelCheckoutTime" value="11:00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Confirmation Number</label>
                                <input type="text" id="hotelConfirmation" placeholder="Booking confirmation #">
                            </div>
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" id="hotelPhone" placeholder="Hotel phone number">
                            </div>
                            <div class="form-group">
                                <label>Notes (Optional)</label>
                                <textarea id="hotelNotes" placeholder="Room number, special requests, etc."></textarea>
                            </div>
                            <button class="btn btn-primary btn-full" onclick="addHotel()">💾 Save Hotel</button>
                        </div>

                        <!-- Hotel Info Panel -->
                        <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 12px; padding: 24px; color: white;">
                            <h3 style="margin-top: 0; color: white;">💡 Hotel Tips</h3>
                            <div style="background: rgba(255,255,255,0.15); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                <p style="margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>📋 What to include:</strong><br>
                                    • Full hotel name and address<br>
                                    • Confirmation number<br>
                                    • Check-in/out dates and times<br>
                                    • Hotel phone number<br>
                                    • Room preferences or requests
                                </p>
                            </div>
                            <div style="background: rgba(255,255,255,0.15); border-radius: 8px; padding: 16px;">
                                <p style="margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>✨ Pro Tips:</strong><br>
                                    • Save confirmation emails<br>
                                    • Check cancellation policies<br>
                                    • Join hotel loyalty programs<br>
                                    • Request early check-in if needed
                                </p>
                            </div>
                        </div>
                    </div>
                    </div>

                    <!-- Saved Hotels List -->
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; border: 1px solid var(--border);">
                        <h3 style="margin-top: 0;">📋 Your Saved Hotels</h3>
                        <div id="hotelsList" style="display: flex; flex-direction: column; gap: 12px;">
                            <p style="color: #64748b; font-style: italic;">No hotels added yet. Add your first hotel above!</p>
                        </div>
                    </div>
                </div>

                <div id="presentationsTab" class="tab-content">
                    <!-- Upload or Manual Entry Choice -->
                    <div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white;">
                        <h3 style="margin-top: 0; color: white;">📎 Add Presentation - Choose Method</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="document.getElementById('presentationUploadInput').click()">
                                <div style="font-size: 48px; margin-bottom: 12px;">📤</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Upload Details</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Upload presentation schedule or confirmation</p>
                                <input type="file" id="presentationUploadInput" accept=".pdf,.eml,.msg,.txt,image/*" style="display: none;" onchange="handlePresentationUpload(this)">
                            </div>
                            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'" onclick="togglePresentationManualEntry()">
                                <div style="font-size: 48px; margin-bottom: 12px;">⌨️</div>
                                <h4 style="margin: 0 0 8px 0; color: white;">Enter Manually</h4>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Type in your presentation details</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="presentationManualEntrySection" style="display: none; margin-bottom: 30px;">
                    <div style="background: #fff; border: 2px solid var(--border); border-radius: 12px; padding: 24px; max-width: 700px;">
                        <h3 style="margin-top: 0; color: #8b5cf6;">➕ Add Presentation Details</h3>
                        <div class="form-group">
                            <label>Presentation Type</label>
                            <select id="presentationType" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 8px;">
                                <option>Presentation</option>
                                <option>Poster</option>
                                <option>Panel Discussion</option>
                                <option>Workshop</option>
                                <option>Teaching/Class</option>
                                <option>Hosting</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="presentationTitle" placeholder="e.g., Research Findings in...">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div class="form-group">
                                <label>Date</label>
                                <input type="date" id="presentationDate">
                            </div>
                            <div class="form-group">
                                <label>Time</label>
                                <input type="time" id="presentationTime">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Location/Room</label>
                            <input type="text" id="presentationLocation" placeholder="e.g., Conference Hall A">
                        </div>
                        <div class="form-group">
                            <label>Co-presenters (Optional)</label>
                            <input type="text" id="presentationCoPresenters" placeholder="Names of co-presenters">
                        </div>
                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="presentationNotes" placeholder="Equipment needed, special requirements, etc."></textarea>
                        </div>
                        <button class="btn btn-primary btn-full" onclick="addPresentation()">💾 Save Presentation</button>
                    </div>
                    </div>

                    <!-- Saved Presentations List -->
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; border: 1px solid var(--border);">
                        <h3 style="margin-top: 0;">📋 Your Presentations</h3>
                        <div id="presentationsList" style="display: flex; flex-direction: column; gap: 12px;">
                            <p style="color: #64748b; font-style: italic;">No presentations added yet. Add your first presentation above!</p>
                        </div>
                    </div>
                </div>

                <div id="memoriesTab" class="tab-content">
                    <div style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); border-radius: 12px; padding: 30px; margin-bottom: 20px; color: white; text-align: center;">
                        <h3 style="margin-top: 0; color: white;">📷 Upload Photos & Files</h3>
                        <p style="opacity: 0.9; margin-bottom: 20px;">Save your favorite moments, photos, and files from your trip</p>
                        <input type="file" id="memoriesUploadInput" accept="image/*,.pdf,.doc,.docx" multiple style="display: none;" onchange="handleMemoriesUpload(this)">
                        <button class="btn btn-primary" onclick="document.getElementById('memoriesUploadInput').click()" style="background: white; color: #ec4899; font-weight: 600; font-size: 16px; padding: 12px 24px;">📤 Upload Files</button>
                    </div>

                    <!-- Memories Gallery -->
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; border: 1px solid var(--border);">
                        <h3 style="margin-top: 0;">🖼️ Your Memories</h3>
                        <div id="memoriesGallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
                            <p style="color: #64748b; font-style: italic; grid-column: 1 / -1;">No memories uploaded yet. Start uploading your photos and files!</p>
                        </div>
                    </div>
                </div>

                <div id="conferenceProgramTab" class="tab-content">
                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="showUploadProgramModal()">📄 Upload Program</button>
                        <input type="text" id="trackName" placeholder="Your name to track (e.g., Dr. Hallstrom)" style="flex: 1; padding: 10px; border: 2px solid var(--border); border-radius: 8px;">
                        <button class="btn btn-success" onclick="findMyEvents()">🔍 Find My Events</button>
                    </div>
                    <div id="conferenceContent">
                        <div class="file-upload" onclick="document.getElementById('conferenceFile').click()">
                            <h3>📁 Upload Conference Program</h3>
                            <p>Drop PDF, Word, or text files here</p>
                            <input type="file" id="conferenceFile" style="display: none;" accept=".pdf,.doc,.docx,.txt" onchange="handleConferenceFile(this)">
                        </div>
                        <div id="conferenceSchedule"></div>
                    </div>
                </div>

                <div id="conferenceTab" class="tab-content">
                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="showUploadProgramModal()">📄 Upload Program</button>
                        <input type="text" id="trackName" placeholder="Your name to track (e.g., Dr. Hallstrom)" style="flex: 1; padding: 10px; border: 2px solid var(--border); border-radius: 8px;">
                        <button class="btn btn-success" onclick="findMyEvents()">🔍 Find My Events</button>
                    </div>
                    <div id="conferenceContent">
                        <div class="file-upload" onclick="document.getElementById('conferenceFile').click()">
                            <h3>📁 Upload Conference Program</h3>
                            <p>Drop PDF, Word, or text files here</p>
                            <input type="file" id="conferenceFile" style="display: none;" accept=".pdf,.doc,.docx,.txt" onchange="handleConferenceFile(this)">
                        </div>
                        <div id="conferenceSchedule"></div>
                    </div>
                </div>

                <div id="packingTab" class="tab-content">
                    <div class="packing-list">
                        <h3>Packing Checklist</h3>
                        <div style="display: flex; gap: 10px; margin: 20px 0;">
                            <input type="text" id="newPackingItem" placeholder="Add item..." style="flex: 1; padding: 10px; border: 2px solid var(--border); border-radius: 8px;">
                            <button class="btn btn-primary" onclick="addPackingItem()">Add</button>
                        </div>
                        <div id="packingList"></div>
                    </div>
                </div>

                <div id="receiptsTab" class="tab-content">
                    <div class="budget-tracker">
                        <h3>Receipts</h3>
                        <div style="display:flex; gap:10px; align-items:center; margin: 10px 0 6px;">
                            <select id="receiptsFilter" onchange="setReceiptsFilter(this.value)" style="padding: 8px; border: 1px solid var(--border); border-radius: 8px;">
                                <option value="all">All</option>
                                <option value="unexpensed">Unexpensed</option>
                                <option value="expensed">Expensed</option>
                            </select>
                            <input type="text" id="receiptsSearch" placeholder="Search vendor..." oninput="setReceiptsSearch(this.value)" style="flex:1; padding:8px 10px; border:1px solid var(--border); border-radius:8px;">
                            <button class="btn btn-secondary" onclick="printReimbursementReport()">🖨️ Reimbursement Report</button>
                        </div>
                        <div style="display: grid; grid-template-columns: 1.3fr 0.7fr 1fr 1fr 1.5fr 1.2fr 1.2fr 0.7fr auto; gap: 10px; margin: 20px 0; align-items: center;">
                            <input type="text" id="receiptVendor" placeholder="Vendor / Merchant">
                            <input type="number" id="receiptAmount" placeholder="Amount" step="0.01" min="0">
                            <select id="receiptCategory">
                                <option>Flight</option>
                                <option>Hotel</option>
                                <option>Food</option>
                                <option>Transport</option>
                                <option>Activities</option>
                                <option>Shopping</option>
                                <option>Other</option>
                            </select>
                            <input type="date" id="receiptDate">
                            <input type="text" id="receiptNote" placeholder="Note (optional)">
                            <input type="text" id="receiptAttendees" placeholder="Attendees (if Food)">
                            <input type="text" id="receiptPurpose" placeholder="Business purpose (if Food)">
                            <label style="display:flex; align-items:center; gap:6px; font-size:14px; color:#374151;">
                                <input type="checkbox" id="receiptExpensedAtAdd"> Expensed?
                            </label>
                            <button class="btn btn-primary" onclick="addReceiptItem()">Add</button>
                        </div>
                        <div id="receiptsList"></div>
                        <div class="budget-total" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; position: sticky; bottom: 0; background: #fff; padding: 10px; border-top: 1px solid var(--border);">
                            <div style="display:flex; justify-content: space-between; background: var(--light); padding: 10px; border-radius: 8px;">
                                <span>Total</span>
                                <span id="receiptsTotal">$0.00</span>
                            </div>
                            <div style="display:flex; justify-content: space-between; background: var(--light); padding: 10px; border-radius: 8px;">
                                <span>Unexpensed</span>
                                <span id="receiptsTotalUnexpensed">$0.00</span>
                            </div>
                            <div style="display:flex; justify-content: space-between; background: var(--light); padding: 10px; border-radius: 8px;">
                                <span>Expensed</span>
                                <span id="receiptsTotalExpensed">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="weatherTab" class="tab-content">
                    <!-- Weather loads automatically based on destination -->
                    <div style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white; text-align: center;">
                        <h3 style="margin-top: 0; color: white;">🌤️ Weather Information</h3>
                        <p style="opacity: 0.9; margin-bottom: 0;">Weather forecasts are automatically loaded based on your trip destination. Make sure your trip has a destination set!</p>
                    </div>
                    
                    <div class="weather-widget">
                        <h3>Weather Forecast</h3>
                        <p>Weather data will be loaded based on your destination...</p>
                    </div>
                </div>

                <div id="mapTab" class="tab-content">
                    <!-- Map loads automatically from itinerary -->
                    <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 12px; padding: 24px; margin-bottom: 20px; color: white; text-align: center;">
                        <h3 style="margin-top: 0; color: white;">🌍 Interactive Map</h3>
                        <p style="opacity: 0.9; margin-bottom: 0;">All locations from your itinerary are automatically displayed on the map below. Click any location to zoom in!</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 230px 1fr 320px; gap: 16px; min-width: 900px;">
                        <div style="border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="padding: 12px; background: var(--light); border-bottom: 1px solid var(--border); font-weight: 600;">
                                📍 Locations
                            </div>
                            <div id="mapLocationsList" style="max-height: 420px; overflow-y: auto;">
                                <p style="color:#64748b; padding:10px;">Loading...</p>
                            </div>
                        </div>
                        <div>
                            <div class="map-container" style="height: 420px; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <div id="leafletMap" style="height: 100%; width: 100%;"></div>
                            </div>
                            <p style="font-size: 0.9em; margin-top: 10px; color:#64748b;">💡 All event locations from your itinerary are shown on the map. Click a location in the list to zoom to it.</p>
                        </div>
                        <div style="border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="padding: 12px; background: #3b82f6; color: white; border-bottom: 1px solid var(--border); font-weight: 600;">
                                ✨ Things to Do
                            </div>
                            <div id="thingsToDoList" style="max-height: 420px; overflow-y: auto; padding: 12px; background: #f8fafc;">
                                <p style="color:#64748b; font-style: italic;">Loading recommendations...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="documentsTab" class="tab-content">
                    <div class="file-upload" onclick="document.getElementById('documentFile').click()">
                        <h3>📎 Upload Documents</h3>
                        <p>Passports, tickets, reservations, etc.</p>
                        <input type="file" id="documentFile" style="display: none;" multiple onchange="handleDocumentUpload(this)">
                    </div>
                    <div id="documentsList" style="margin-top: 20px;"></div>
                </div>

                <div id="checklistTab" class="tab-content">
                    <div style="background: #fff; padding: 24px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 20px;">
                        <div style="margin: 8px 0 16px;">
                            <button class="btn btn-secondary" onclick="showElementsModal()">📝 Prepare Elements Post</button>
                            <button class="btn btn-secondary" onclick="showIssuesModal()" style="margin-left:8px;">⚠️ Check for Issues</button>
                        </div>
                        
                        <h3 style="margin-bottom: 16px;">Registration, Hotel & Flight Info</h3>
                        <div style="display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                            <div class="form-group">
                                <label>Registration - Date Purchased</label>
                                <input type="date" id="chkRegistrationDate">
                            </div>
                            <div class="form-group">
                                <label>Registration - Confirmation #</label>
                                <input type="text" id="chkRegistrationConf" placeholder="CONF12345">
                            </div>
                            <div class="form-group">
                                <label>Hotel - Check-in</label>
                                <input type="date" id="chkHotelStart">
                            </div>
                            <div class="form-group">
                                <label>Hotel - Check-out</label>
                                <input type="date" id="chkHotelEnd">
                            </div>
                            <div class="form-group">
                                <label>Hotel - Confirmation #</label>
                                <input type="text" id="chkHotelConf" placeholder="CONF67890">
                            </div>
                            <div class="form-group">
                                <label>Flight - Depart Date</label>
                                <input type="date" id="chkFlightDepart">
                            </div>
                            <div class="form-group">
                                <label>Flight - Return Date</label>
                                <input type="date" id="chkFlightReturn">
                            </div>
                            <div class="form-group">
                                <label>Flight - Confirmation #</label>
                                <input type="text" id="chkFlightConf" placeholder="CONF24680">
                            </div>
                        </div>
                        <div style="margin: 12px 0 20px;">
                            <button class="btn btn-primary" onclick="saveChecklist()">Save Checklist</button>
                        </div>

                        <h3 style="margin: 20px 0 16px;">My Presentations</h3>
                        <div style="max-width: 500px;">
                            <div style="display:grid; grid-template-columns: 200px 1fr auto; gap:8px; margin-bottom:10px; align-items: end;">
                                <select id="chkPresentationType" style="padding:10px; border: 1px solid var(--border); border-radius:8px;">
                                    <option value="Presentation">Presentation</option>
                                    <option value="Poster">Poster</option>
                                    <option value="Talk">Talk</option>
                                </select>
                                <input type="text" id="chkPresentationName" placeholder="Title" style="padding:10px; border: 1px solid var(--border); border-radius:8px;">
                                <button class="btn btn-secondary" onclick="addChecklistPresentation()">Add</button>
                            </div>
                            <div id="chkPresentationsList"></div>
                        </div>
                    </div>
                </div>

                <div id="archivedTab" class="tab-content">
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; border: 1px solid var(--border);">
                        <p style="color: #64748b; margin-bottom: 16px;">Archived trips are stored here. You can restore them at any time.</p>
                        <div id="archivedTripsContent" style="display: grid; gap: 16px;">
                            <p style="color: #64748b; font-style: italic;">No archived trips yet.</p>
                        </div>
                    </div>
                </div>

                <div id="settingsTab" class="tab-content">
                    <div style="max-width: 700px;">
                        <h2 style="margin-bottom:20px;">⚙️ Settings</h2>
                        
                        <div style="background:#fff; padding:24px; border-radius:12px; border:1px solid var(--border); margin-bottom:20px;">
                            <h3 style="margin-top:0;">🎉 Live Events Integration</h3>
                            <p style="color:#64748b; margin-bottom:16px;">Connect to Ticketmaster API to discover live events, concerts, sports, and shows happening during your trip!</p>
                            
                            <div class="form-group">
                                <label>Ticketmaster API Key</label>
                                <input type="text" id="ticketmasterApiKey" placeholder="Enter your API key here..." style="font-family: monospace;">
                                <small style="color:#64748b; font-size:0.85em;">
                                    Don't have an API key? <a href="https://developer.ticketmaster.com/products-and-docs/apis/getting-started/" target="_blank" rel="noopener noreferrer" style="color:#3b82f6;">Get one free from Ticketmaster</a>
                                </small>
                            </div>
                            
                            <button class="btn btn-primary" onclick="saveApiKey()">💾 Save API Key</button>
                            <div id="apiKeyStatus" style="margin-top:12px;"></div>
                        </div>

                        <div style="background:#f8fafc; padding:20px; border-radius:12px; border:1px solid var(--border);">
                            <h4 style="margin-top:0;">ℹ️ How to Get Your Free API Key:</h4>
                            <ol style="color:#64748b; font-size:0.9em; line-height:1.8;">
                                <li>Visit <a href="https://developer.ticketmaster.com/" target="_blank" rel="noopener noreferrer" style="color:#3b82f6;">developer.ticketmaster.com</a></li>
                                <li>Click "Get Your Free API Key"</li>
                                <li>Sign up or log in</li>
                                <li>Copy your Consumer Key</li>
                                <li>Paste it above and save!</li>
                            </ol>
                            <p style="color:#64748b; font-size:0.85em; margin-bottom:0;">
                                <strong>🔒 Privacy:</strong> Your API key is stored locally in your browser only. It never leaves your device.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="newTripModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Trip</h2>
                <button class="close-modal" onclick="closeModal('newTripModal')">×</button>
            </div>
            <div class="form-group">
                <label>Trip Name</label>
                <input type="text" id="newTripName" placeholder="e.g., AAHKS Conference 2025">
            </div>
            <div class="form-group">
                <label>Destination</label>
                <input type="text" id="newTripDestination" placeholder="e.g., Dallas, TX">
            </div>
            <div class="form-group">
                <label>Start Date</label>
                <input type="date" id="newTripStart">
            </div>
            <div class="form-group">
                <label>End Date</label>
                <input type="date" id="newTripEnd">
            </div>
            <button class="btn btn-primary btn-full" onclick="createNewTrip()">Create Trip</button>
        </div>
    </div>

    <div id="editTripModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>✏️ Edit Trip</h2>
                <button class="close-modal" onclick="closeModal('editTripModal')">×</button>
            </div>
            <input type="hidden" id="editTripId">
            <div class="form-group">
                <label>Trip Name</label>
                <input type="text" id="editTripName" placeholder="e.g., AAHKS Conference 2025">
            </div>
            <div class="form-group">
                <label>Destination</label>
                <input type="text" id="editTripDestination" placeholder="e.g., Dallas, Texas">
                <small style="color:#64748b; font-size:0.85em;">💡 Use full names like "Dallas, Texas" for accurate weather</small>
            </div>
            <div class="form-group">
                <label>Start Date</label>
                <input type="date" id="editTripStart">
            </div>
            <div class="form-group">
                <label>End Date</label>
                <input type="date" id="editTripEnd">
            </div>
            <button class="btn btn-primary btn-full" onclick="saveEditTrip()">💾 Save Changes</button>
        </div>
    </div>

    <div id="addEventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Event</h2>
                <button class="close-modal" onclick="closeModal('addEventModal')">×</button>
            </div>
            <div class="form-group">
                <label>Event Type</label>
                <select id="eventType">
                    <option value="personal">Personal Event</option>
                    <option value="conference">Conference Session</option>
                    <option value="flight">Flight</option>
                    <option value="hotel">Hotel</option>
                    <option value="meeting">Meeting</option>
                </select>
            </div>
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="eventTitle" placeholder="Event title">
            </div>
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="eventDate">
            </div>
            <div class="form-group">
                <label>Start Time</label>
                <input type="time" id="eventStartTime">
            </div>
            <div class="form-group">
                <label>End Time</label>
                <input type="time" id="eventEndTime">
            </div>
            <div class="form-group">
                <label>Location</label>
                <input type="text" id="eventLocation" placeholder="Location">
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="eventDescription" placeholder="Additional details"></textarea>
            </div>
            <button class="btn btn-primary btn-full" onclick="addEvent()">Add Event</button>
        </div>
    </div>

    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Import Calendar</h2>
                <button class="close-modal" onclick="closeModal('importModal')">×</button>
            </div>
            <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 15px; margin-bottom: 20px; border-radius: 8px;">
                💡 <strong>How to get .ics files:</strong><br>
                • <strong>Google Calendar:</strong> Settings → Import & Export → Export<br>
                • <strong>Outlook:</strong> File → Save Calendar → iCalendar Format<br>
                • <strong>Apple Calendar:</strong> File → Export → Export
            </div>
            <div class="form-group">
                <label>Calendar Format</label>
                <select id="importFormat">
                    <option value="ics">iCalendar (.ics)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Calendar Data</label>
                <textarea id="importData" placeholder="Paste your .ics file content here..."></textarea>
            </div>
            <button class="btn btn-primary btn-full" onclick="importCalendar()">Import</button>
        </div>
    </div>

    <div id="agendaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Conference Agenda</h2>
                <button class="close-modal" onclick="closeModal('agendaModal')">×</button>
            </div>
            <div class="form-group">
                <label>Agenda URL (optional)</label>
                <input type="text" id="agendaUrl" placeholder="https://example.com/agenda.pdf or page URL">
            </div>
            <div class="form-group">
                <label>Agenda Notes / Paste Agenda</label>
                <textarea id="agendaText" placeholder="Paste the agenda text or notes here..."></textarea>
            </div>
            <div class="form-group">
                <label>Upload PDF(s)</label>
                <input type="file" id="agendaPdfInput" accept="application/pdf" multiple onchange="handleAgendaPdfSelect(this)">
                <small style="color:#64748b; display:block; margin-top:6px;">PDFs are stored locally in your browser. Large files may increase storage usage.</small>
            </div>
            <div id="agendaPdfList" style="margin:10px 0;"></div>
            <div style="display:flex; gap:10px;">
                <button class="btn btn-primary" style="flex:1;" onclick="saveAgenda()">Save</button>
                <button class="btn btn-secondary" style="flex:1;" onclick="openAgendaUrl()">Open URL</button>
            </div>
        </div>
    </div>

    <script src="app.js?v=18"></script>
</body>
</html>
